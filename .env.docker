# ============================================================================
# WEBGRE3 - Docker Environment Configuration
# ============================================================================
# Questo file contiene le variabili d'ambiente per Docker
# Rinominalo in .env prima di avviare i container
# ============================================================================

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================
APP_ENV=production
APP_DEBUG=false
APP_NAME=WEBGRE
APP_VERSION=3.0.0
VER_NO=3.ELOQUENT
BUILD_NO=2025.10
APP_SUBDIRECTORY=

# ============================================================================
# DATABASE CONFIGURATION - Connessione a MySQL core-services
# ============================================================================
# IMPORTANTE: Usa il nome del container MySQL dello stack core-services
# Esempio: se il container si chiama "mysql" o "core-services-mysql-1"

DB_HOST=mysql
# Se il container MySQL ha un nome diverso, usa quello
# DB_HOST=core-services-mysql-1

DB_PORT=3306
DB_NAME=webgre3
DB_USER=webgre_user
DB_PASS=webgre_secure_password_123

# Character set
DB_CHARSET=utf8mb4

# ============================================================================
# REDIS CACHE (Container interno)
# ============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=webgre3_redis_secure_password
REDIS_DB=0

# ============================================================================
# PHP CONFIGURATION
# ============================================================================
PHP_OPCACHE_ENABLE=1
PHP_OPCACHE_MEMORY=256
PHP_OPCACHE_MAX_FILES=20000

PHP_MEMORY_LIMIT=256M
PHP_UPLOAD_MAX_FILESIZE=50M
PHP_POST_MAX_SIZE=50M
PHP_MAX_EXECUTION_TIME=300
PHP_MAX_INPUT_TIME=300

# ============================================================================
# SESSION & SECURITY
# ============================================================================
SESSION_LIFETIME=7200
REMEMBER_TOKEN_LIFETIME=2592000
HASH_COST=12
CSRF_TOKEN_LENGTH=32

# ============================================================================
# DEFAULT ROUTING
# ============================================================================
DEFAULT_CONTROLLER=Home
DEFAULT_ACTION=index

# ============================================================================
# TIMEZONE & LOCALE
# ============================================================================
APP_TIMEZONE=Europe/Rome
APP_LOCALE=it
TZ=Europe/Rome

# ============================================================================
# CACHE & PERFORMANCE
# ============================================================================
# Opzioni: file, redis
CACHE_DRIVER=redis
CACHE_TTL=3600

# ============================================================================
# LOGGING
# ============================================================================
LOG_LEVEL=warning
LOG_MAX_FILES=30

# ============================================================================
# FILE UPLOAD SETTINGS
# ============================================================================
MAX_UPLOAD_SIZE=50M
ALLOWED_EXTENSIONS=jpg,jpeg,png,gif,pdf,doc,docx,xls,xlsx

# ============================================================================
# DOCKER SPECIFIC SETTINGS
# ============================================================================

# Port mapping (host:container)
WEBGRE3_PORT=8080

# Container resources (opzionale, limita risorse)
# WEBGRE3_CPU_LIMIT=1.0
# WEBGRE3_MEMORY_LIMIT=512M

# ============================================================================
# DEVELOPMENT SETTINGS (solo per development)
# ============================================================================
# Decommenta queste righe per development locale

# APP_ENV=development
# APP_DEBUG=true
# LOG_LEVEL=debug
# PHP_OPCACHE_ENABLE=0

# ============================================================================
# NETWORK CONFIGURATION
# ============================================================================
# Nome della network core-services a cui connettersi
CORE_SERVICES_NETWORK=core-services_default

# Se hai rinominato la network dello stack core-services:
# CORE_SERVICES_NETWORK=nome_personalizzato_network

# ============================================================================
# BACKUP & MAINTENANCE
# ============================================================================
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=30

# ============================================================================
# EXTERNAL SERVICES (Opzionale)
# ============================================================================
# MAIL_HOST=smtp.gmail.com
# MAIL_PORT=587
# MAIL_USERNAME=
# MAIL_PASSWORD=
# MAIL_ENCRYPTION=tls
# MAIL_FROM_ADDRESS=
# MAIL_FROM_NAME=${APP_NAME}

# ============================================================================
# NOTES
# ============================================================================
# 1. Per connettersi al MySQL di core-services:
#    - Verifica il nome del container: docker ps | grep mysql
#    - Usa quel nome in DB_HOST
#
# 2. Verifica che la network core-services_default esista:
#    docker network ls | grep core-services
#
# 3. Se la network ha un nome diverso, aggiornala in docker-compose.yml:
#    networks:
#      core-services_default:
#        external: true
#        name: IL_NOME_REALE_DELLA_NETWORK
#
# 4. Test connessione database:
#    docker exec -it webgre3-app php artisan db:check
#
# 5. Per development locale, monta il codice come volume:
#    Vedi docker-compose.yml sezione volumes
#
# ============================================================================
