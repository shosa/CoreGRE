<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CoreGRE API Documentation</title>
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/swagger-ui-dist@5.10.5/swagger-ui.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #f3f4f6;
        }
        #swagger-ui {
            margin: 20px;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            border-radius: 4px;
        }
    </style>
</head>
<body>

    <!-- Swagger UI Container -->
    <div id="swagger-ui"></div>

    <!-- Swagger UI Bundle -->
    <script src="https://unpkg.com/swagger-ui-dist@5.10.5/swagger-ui-bundle.js" crossorigin></script>
    <script src="https://unpkg.com/swagger-ui-dist@5.10.5/swagger-ui-standalone-preset.js" crossorigin></script>

    <script>
        window.onload = function() {
            // Determina il percorso base
            const baseUrl = window.location.origin;
            const openapiUrl = baseUrl + '/openapi.yaml';

            // Inizializza Swagger UI
            const ui = SwaggerUIBundle({
                url: openapiUrl,
                dom_id: '#swagger-ui',
                deepLinking: true,
                presets: [
                    SwaggerUIBundle.presets.apis,
                    SwaggerUIStandalonePreset
                ],
                plugins: [
                    SwaggerUIBundle.plugins.DownloadUrl
                ],
                layout: "StandaloneLayout",
                defaultModelsExpandDepth: 1,
                defaultModelExpandDepth: 1,
                docExpansion: "list",
                filter: true,
                showExtensions: true,
                showCommonExtensions: true,
                tryItOutEnabled: true,
                persistAuthorization: true,
                displayRequestDuration: true,
                validatorUrl: null, // Disabilita validatore esterno
                onComplete: function() {
                    console.log('CoreGRE API Documentation loaded successfully');
                },
                requestInterceptor: function(request) {
                    // Aggiungi headers personalizzati se necessario
                    console.log('Request:', request);
                    return request;
                },
                responseInterceptor: function(response) {
                    console.log('Response:', response);
                    return response;
                }
            });

            window.ui = ui;

            // Log informazioni
            console.log('%c CoreGRE API Docs ', 'background: #1e3a8a; color: white; font-size: 16px; padding: 5px 10px;');
            console.log('OpenAPI Spec URL:', openapiUrl);
            console.log('Environment:', baseUrl);
        }
    </script>

    <!-- Footer Info -->
    <div style="background: white; padding: 20px; margin: 20px; border-radius: 4px; box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1); text-align: center; color: #64748b;">
        <p style="margin: 0;">
            <strong>CoreGRE API Documentation</strong> - v1.0.0
        </p>
        <p style="margin: 5px 0 0 0; font-size: 0.9em;">
            Powered by <a href="https://swagger.io" target="_blank" style="color: #3b82f6;">Swagger UI</a> |
            <a href="/openapi.yaml" target="_blank" style="color: #3b82f6;">Download OpenAPI Spec</a>
        </p>
    </div>
</body>
</html>
